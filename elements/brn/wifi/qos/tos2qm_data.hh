#ifndef TOS2QM_DATA_HH
#define TOS2QM_DATA_HH

#include <click/element.hh>

#define T2QM_MAX_INDEX_PACKET_LOSS   5
#define T2QM_MAX_INDEX_NO_NEIGHBORS 25
#define T2QM_MAX_INDEX_MSDU_SIZE     4
#define T2QM_MAX_INDEX_RATES         4

CLICK_DECLS


static const int32_t _backoff_matrix_tmt_backoff_4D[T2QM_MAX_INDEX_RATES][T2QM_MAX_INDEX_MSDU_SIZE][T2QM_MAX_INDEX_NO_NEIGHBORS][T2QM_MAX_INDEX_PACKET_LOSS]=
    {{{{113,38,18,8,4},{358,120,59,27,15},{707,257,118,52,30},{1189,442,199,90,50},{1815,685,307,131,78},{2502,931,435,189,109},{2992,1229,587,249,148},{0,1607,765,328,186},{0,2053,964,410,241},{0,2487,1128,507,287},{0,2999,1376,605,354},{0,3000,1694,730,416},{0,0,1917,818,481},{0,0,2187,975,555},{0,0,2561,1100,652},{0,0,2856,1255,730},{0,0,3000,1415,807},{0,0,0,1620,906},{0,0,0,1746,1008},{0,0,0,1924,1118},{0,0,0,2116,1225},{0,0,0,2326,1347},{0,0,0,2562,1467},{0,0,0,2764,1628},{0,0,0,2982,1743}},
    {{113,38,18,8,4},{358,120,59,27,15},{707,257,118,52,30},{1189,442,199,90,50},{1815,685,307,131,78},{2502,931,435,189,109},{2992,1229,587,249,148},{0,1607,765,328,186},{0,2053,964,410,241},{0,2487,1128,507,287},{0,2999,1376,605,354},{0,3000,1694,730,416},{0,0,1917,818,481},{0,0,2187,975,555},{0,0,2561,1100,652},{0,0,2856,1255,730},{0,0,3000,1415,807},{0,0,0,1620,906},{0,0,0,1746,1008},{0,0,0,1924,1118},{0,0,0,2116,1225},{0,0,0,2326,1347},{0,0,0,2562,1467},{0,0,0,2764,1628},{0,0,0,2982,1743}},
    {{113,38,18,8,4},{358,120,59,27,15},{707,257,118,52,30},{1189,442,199,90,50},{1815,685,307,131,78},{2502,931,435,189,109},{2992,1229,587,249,148},{0,1607,765,328,186},{0,2053,964,410,241},{0,2487,1128,507,287},{0,2999,1376,605,354},{0,3000,1694,730,416},{0,0,1917,818,481},{0,0,2187,975,555},{0,0,2561,1100,652},{0,0,2856,1255,730},{0,0,3000,1415,807},{0,0,0,1620,906},{0,0,0,1746,1008},{0,0,0,1924,1118},{0,0,0,2116,1225},{0,0,0,2326,1347},{0,0,0,2562,1467},{0,0,0,2764,1628},{0,0,0,2982,1743}},
    {{113,38,18,8,4},{358,120,59,27,15},{707,257,118,52,30},{1189,442,199,90,50},{1815,685,307,131,78},{2502,931,435,189,109},{2992,1229,587,249,148},{0,1607,765,328,186},{0,2053,964,410,241},{0,2487,1128,507,287},{0,2999,1376,605,354},{0,3000,1694,730,416},{0,0,1917,818,481},{0,0,2187,975,555},{0,0,2561,1100,652},{0,0,2856,1255,730},{0,0,3000,1415,807},{0,0,0,1620,906},{0,0,0,1746,1008},{0,0,0,1924,1118},{0,0,0,2116,1225},{0,0,0,2326,1347},{0,0,0,2562,1467},{0,0,0,2764,1628},{0,0,0,2982,1743}}},
    {{{113,38,18,8,4},{358,120,59,27,15},{707,257,118,52,30},{1189,442,199,90,50},{1815,685,307,131,78},{2502,931,435,189,109},{2992,1229,587,249,148},{0,1607,765,328,186},{0,2053,964,410,241},{0,2487,1128,507,287},{0,2999,1376,605,354},{0,3000,1694,730,416},{0,0,1917,818,481},{0,0,2187,975,555},{0,0,2561,1100,652},{0,0,2856,1255,730},{0,0,3000,1415,807},{0,0,0,1620,906},{0,0,0,1746,1008},{0,0,0,1924,1118},{0,0,0,2116,1225},{0,0,0,2326,1347},{0,0,0,2562,1467},{0,0,0,2764,1628},{0,0,0,2982,1743}},
    {{113,38,18,8,4},{358,120,59,27,15},{707,257,118,52,30},{1189,442,199,90,50},{1815,685,307,131,78},{2502,931,435,189,109},{2992,1229,587,249,148},{0,1607,765,328,186},{0,2053,964,410,241},{0,2487,1128,507,287},{0,2999,1376,605,354},{0,3000,1694,730,416},{0,0,1917,818,481},{0,0,2187,975,555},{0,0,2561,1100,652},{0,0,2856,1255,730},{0,0,3000,1415,807},{0,0,0,1620,906},{0,0,0,1746,1008},{0,0,0,1924,1118},{0,0,0,2116,1225},{0,0,0,2326,1347},{0,0,0,2562,1467},{0,0,0,2764,1628},{0,0,0,2982,1743}},
    {{113,38,18,8,4},{358,120,59,27,15},{707,257,118,52,30},{1189,442,199,90,50},{1815,685,307,131,78},{2502,931,435,189,109},{2992,1229,587,249,148},{0,1607,765,328,186},{0,2053,964,410,241},{0,2487,1128,507,287},{0,2999,1376,605,354},{0,3000,1694,730,416},{0,0,1917,818,481},{0,0,2187,975,555},{0,0,2561,1100,652},{0,0,2856,1255,730},{0,0,3000,1415,807},{0,0,0,1620,906},{0,0,0,1746,1008},{0,0,0,1924,1118},{0,0,0,2116,1225},{0,0,0,2326,1347},{0,0,0,2562,1467},{0,0,0,2764,1628},{0,0,0,2982,1743}},
    {{113,38,18,8,4},{358,120,59,27,15},{707,257,118,52,30},{1189,442,199,90,50},{1815,685,307,131,78},{2502,931,435,189,109},{2992,1229,587,249,148},{0,1607,765,328,186},{0,2053,964,410,241},{0,2487,1128,507,287},{0,2999,1376,605,354},{0,3000,1694,730,416},{0,0,1917,818,481},{0,0,2187,975,555},{0,0,2561,1100,652},{0,0,2856,1255,730},{0,0,3000,1415,807},{0,0,0,1620,906},{0,0,0,1746,1008},{0,0,0,1924,1118},{0,0,0,2116,1225},{0,0,0,2326,1347},{0,0,0,2562,1467},{0,0,0,2764,1628},{0,0,0,2982,1743}}},
    {{{113,38,18,8,4},{358,120,59,27,15},{707,257,118,52,30},{1189,442,199,90,50},{1815,685,307,131,78},{2502,931,435,189,109},{2992,1229,587,249,148},{0,1607,765,328,186},{0,2053,964,410,241},{0,2487,1128,507,287},{0,2999,1376,605,354},{0,3000,1694,730,416},{0,0,1917,818,481},{0,0,2187,975,555},{0,0,2561,1100,652},{0,0,2856,1255,730},{0,0,3000,1415,807},{0,0,0,1620,906},{0,0,0,1746,1008},{0,0,0,1924,1118},{0,0,0,2116,1225},{0,0,0,2326,1347},{0,0,0,2562,1467},{0,0,0,2764,1628},{0,0,0,2982,1743}},
    {{113,38,18,8,4},{358,120,59,27,15},{707,257,118,52,30},{1189,442,199,90,50},{1815,685,307,131,78},{2502,931,435,189,109},{2992,1229,587,249,148},{0,1607,765,328,186},{0,2053,964,410,241},{0,2487,1128,507,287},{0,2999,1376,605,354},{0,3000,1694,730,416},{0,0,1917,818,481},{0,0,2187,975,555},{0,0,2561,1100,652},{0,0,2856,1255,730},{0,0,3000,1415,807},{0,0,0,1620,906},{0,0,0,1746,1008},{0,0,0,1924,1118},{0,0,0,2116,1225},{0,0,0,2326,1347},{0,0,0,2562,1467},{0,0,0,2764,1628},{0,0,0,2982,1743}},
    {{113,38,18,8,4},{358,120,59,27,15},{707,257,118,52,30},{1189,442,199,90,50},{1815,685,307,131,78},{2502,931,435,189,109},{2992,1229,587,249,148},{0,1607,765,328,186},{0,2053,964,410,241},{0,2487,1128,507,287},{0,2999,1376,605,354},{0,3000,1694,730,416},{0,0,1917,818,481},{0,0,2187,975,555},{0,0,2561,1100,652},{0,0,2856,1255,730},{0,0,3000,1415,807},{0,0,0,1620,906},{0,0,0,1746,1008},{0,0,0,1924,1118},{0,0,0,2116,1225},{0,0,0,2326,1347},{0,0,0,2562,1467},{0,0,0,2764,1628},{0,0,0,2982,1743}},
    {{113,38,18,8,4},{358,120,59,27,15},{707,257,118,52,30},{1189,442,199,90,50},{1815,685,307,131,78},{2502,931,435,189,109},{2992,1229,587,249,148},{0,1607,765,328,186},{0,2053,964,410,241},{0,2487,1128,507,287},{0,2999,1376,605,354},{0,3000,1694,730,416},{0,0,1917,818,481},{0,0,2187,975,555},{0,0,2561,1100,652},{0,0,2856,1255,730},{0,0,3000,1415,807},{0,0,0,1620,906},{0,0,0,1746,1008},{0,0,0,1924,1118},{0,0,0,2116,1225},{0,0,0,2326,1347},{0,0,0,2562,1467},{0,0,0,2764,1628},{0,0,0,2982,1743}}},
    {{{113,38,18,8,4},{358,120,59,27,15},{707,257,118,52,30},{1189,442,199,90,50},{1815,685,307,131,78},{2502,931,435,189,109},{2992,1229,587,249,148},{0,1607,765,328,186},{0,2053,964,410,241},{0,2487,1128,507,287},{0,2999,1376,605,354},{0,3000,1694,730,416},{0,0,1917,818,481},{0,0,2187,975,555},{0,0,2561,1100,652},{0,0,2856,1255,730},{0,0,3000,1415,807},{0,0,0,1620,906},{0,0,0,1746,1008},{0,0,0,1924,1118},{0,0,0,2116,1225},{0,0,0,2326,1347},{0,0,0,2562,1467},{0,0,0,2764,1628},{0,0,0,2982,1743}},
    {{113,38,18,8,4},{358,120,59,27,15},{707,257,118,52,30},{1189,442,199,90,50},{1815,685,307,131,78},{2502,931,435,189,109},{2992,1229,587,249,148},{0,1607,765,328,186},{0,2053,964,410,241},{0,2487,1128,507,287},{0,2999,1376,605,354},{0,3000,1694,730,416},{0,0,1917,818,481},{0,0,2187,975,555},{0,0,2561,1100,652},{0,0,2856,1255,730},{0,0,3000,1415,807},{0,0,0,1620,906},{0,0,0,1746,1008},{0,0,0,1924,1118},{0,0,0,2116,1225},{0,0,0,2326,1347},{0,0,0,2562,1467},{0,0,0,2764,1628},{0,0,0,2982,1743}},
    {{113,38,18,8,4},{358,120,59,27,15},{707,257,118,52,30},{1189,442,199,90,50},{1815,685,307,131,78},{2502,931,435,189,109},{2992,1229,587,249,148},{0,1607,765,328,186},{0,2053,964,410,241},{0,2487,1128,507,287},{0,2999,1376,605,354},{0,3000,1694,730,416},{0,0,1917,818,481},{0,0,2187,975,555},{0,0,2561,1100,652},{0,0,2856,1255,730},{0,0,3000,1415,807},{0,0,0,1620,906},{0,0,0,1746,1008},{0,0,0,1924,1118},{0,0,0,2116,1225},{0,0,0,2326,1347},{0,0,0,2562,1467},{0,0,0,2764,1628},{0,0,0,2982,1743}},
    {{113,38,18,8,4},{358,120,59,27,15},{707,257,118,52,30},{1189,442,199,90,50},{1815,685,307,131,78},{2502,931,435,189,109},{2992,1229,587,249,148},{0,1607,765,328,186},{0,2053,964,410,241},{0,2487,1128,507,287},{0,2999,1376,605,354},{0,3000,1694,730,416},{0,0,1917,818,481},{0,0,2187,975,555},{0,0,2561,1100,652},{0,0,2856,1255,730},{0,0,3000,1415,807},{0,0,0,1620,906},{0,0,0,1746,1008},{0,0,0,1924,1118},{0,0,0,2116,1225},{0,0,0,2326,1347},{0,0,0,2562,1467},{0,0,0,2764,1628},{0,0,0,2982,1743}}}};

static const int32_t _backoff_matrix_tmt_backoff_3D[T2QM_MAX_INDEX_RATES][T2QM_MAX_INDEX_MSDU_SIZE][T2QM_MAX_INDEX_NO_NEIGHBORS]=
  {{{30,49,75,92,114,140,166,180,216,225,248,259,299,288,361,360,339,419,431,443,418,486,503,535,576},
    {57,73,127,149,216,235,245,291,324,370,394,440,507,502,563,531,679,701,673,766,741,848,800,900,821},
    {57,113,177,231,258,304,396,366,463,549,553,651,637,717,811,878,858,950,963,952,1057,1148,1080,1201,1283},
    {120,213,241,390,530,519,579,706,714,914,988,894,1055,1112,1181,1357,1336,1586,1558,1615,1571,1827,1780,1906,1992}},
    {{19,34,49,63,79,89,95,119,149,143,159,163,179,221,213,230,245,250,278,264,281,320,317,345,354},
    {30,49,75,106,127,140,166,180,216,225,248,259,299,288,361,360,339,419,431,456,523,486,539,535,576},
    {41,73,94,125,152,214,227,269,292,338,368,384,401,474,480,531,514,571,605,622,676,686,727,749,821},
    {57,113,177,231,258,304,396,366,463,549,520,651,637,717,811,878,858,806,963,952,1057,1039,1080,1201,1283}},
    {{9,19,28,31,44,50,60,60,79,89,96,96,106,122,124,134,132,150,152,171,178,178,190,192,202},
    {15,28,40,51,63,68,95,103,106,117,137,155,163,160,186,195,197,220,241,250,261,255,274,293,310},
    {19,36,60,79,79,89,112,145,149,170,178,211,226,221,252,248,260,290,278,310,352,364,368,394,420},
    {30,73,94,108,152,165,190,205,216,265,285,316,330,362,361,417,458,465,472,495,523,582,594,605,638}},
    {{7,13,22,31,30,41,46,49,61,63,73,81,83,96,93,106,103,119,124,131,139,153,144,162,171},
    {11,21,28,39,44,56,60,74,79,94,96,112,114,122,134,134,155,163,185,180,178,193,206,218,222},
    {15,28,40,49,63,68,95,94,106,117,137,155,163,160,167,195,197,213,220,250,232,255,274,293,310},
    {26,36,60,79,86,119,122,150,173,183,203,211,234,252,252,275,339,348,330,375,352,414,432,443,473}}};

/*
static const int32_t _backoff_matrix_birthday_problem_intuitv[T2QM_MAX_INDEX_PACKET_LOSS][T2QM_MAX_INDEX_NO_NEIGHBORS]=
   {{50,99,148,198,247,297,346,396,445,495,544,594,643,693,742,792,841,891,940,990,1039,1089,1138,1188,1237},
    {20,39,58,78,97,117,136,156,175,195,214,234,253,273,292,312,331,351,370,390,409,429,448,468,487},
    {9,19,28,38,47,57,66,76,85,95,104,114,123,133,142,152,161,171,180,190,199,209,218,228,237},
    {4,9,13,18,22,27,31,36,40,45,49,54,58,63,67,72,76,81,85,90,94,99,103,108,112},
    {3,6,8,11,14,17,20,22,25,28,31,34,36,39,42,45,48,50,53,56,59,62,64,67,70}};
*/

static const int32_t _backoff_packet_loss[T2QM_MAX_INDEX_PACKET_LOSS]={2,5,10,20,30};

static const int32_t vector_msdu_sizes[T2QM_MAX_INDEX_MSDU_SIZE] = {500, 1500, 3000, 8000};
static const int32_t vector_rates_data[T2QM_MAX_INDEX_RATES] = {2, 12, 48, 108}; //double rate
static const int32_t vector_no_neighbours[T2QM_MAX_INDEX_NO_NEIGHBORS] = {1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25};


class Tos2QmData : public Element {
/* Derived Functions */
public: /* Element */
  const char *class_name() const  { return "Tos2QmData"; }

/* Own Functions */
public:
  Tos2QmData();
  ~Tos2QmData();

  static int find_closest_size_index(int size);
  static int find_closest_rate_index(int rate);
  static int find_closest_no_neighbour_index(int no_neighbours);
  static int find_closest_per_index(int per);
};


CLICK_ENDDECLS

#endif /* TOS2QM_DATA_HH */
